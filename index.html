<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GMOD 服务器加载页</title>
  <audio id="bgm" src="images/music.mp3" autoplay loop></audio>
  <style>
    :root {
      --accent: rgba(255, 255, 255, 0.95);
      --glass: rgba(255, 255, 255, 0.06);
      --glass-strong: rgba(255, 255, 255, 0.10);
      --text: #e9eef6;
      --muted: rgba(233, 238, 246, 0.7);
      --bg-dark: #0b1020;
      --card-radius: 14px;
      font-family: "Microsoft YaHei", "Segoe UI", Roboto, Arial, sans-serif;
    }

    html, body {
      height: 100%;
      margin: 0;
      background: #0b1020 !important;
      color: var(--text);
      overflow: hidden;
    }

    /* 背景相关 */
    .background-slideshow {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      background-size: cover;
      background-position: center;
      filter: blur(3px) brightness(0.42) saturate(0.95) contrast(0.9);
      transform: scale(1.05);
      transition: background-image 1.8s ease-in-out;
    }

    .overlay {
      position: fixed;
      inset: 0;
      z-index: -1;
      background: radial-gradient(circle at center, rgba(255,255,255,0.1), rgba(0,0,0,0.7));
    }

    /* 容器 */
    .container {
      position: relative;
      z-index: 2;
      height: 100%;
      display: flex;
      gap: 24px;
      align-items: center;
      justify-content: center;
      padding: 40px;
    }

    .card {
      width: min(1100px, 96%);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.02));
      border-radius: var(--card-radius);
      padding: 22px;
      box-shadow: 0 10px 30px rgba(2, 6, 23, 0.6);
      backdrop-filter: blur(6px) saturate(1.08);
      display: grid;
      grid-template-columns: 360px 1fr;
      gap: 18px;
      align-items: start;
      overflow: hidden;
    }

    .left {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .logo {
      height: 120px;
      border-radius: 10px;
      overflow: hidden;
      background: var(--glass);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      letter-spacing: 1px;
    }

    .qq-qr {
      margin-top: auto;
      background: var(--glass-strong);
      padding: 12px;
      border-radius: 10px;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
    }

    .qq-qr img {
      width: 160px;
      height: 160px;
      object-fit: cover;
      border-radius: 6px;
    }

    .qq-qr small {
      color: var(--muted);
    }

    .right {
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-width: 0;
    }

    .rules {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.015));
      padding: 12px;
      border-radius: 10px;
      min-height: 120px;
      overflow: auto;
    }

    .rules h3 {
      margin: 0 0 8px 0;
      font-size: 18px;
    }

    .rules ul {
      margin: 0;
      padding-left: 18px;
      color: var(--muted);
    }

    .staff-wrap {
      margin-top: 6px;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
      padding: 8px 12px;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }

    .staff-track {
      display: flex;
      gap: 18px;
      align-items: center;
      white-space: nowrap;
      transform: translateX(0);
      animation: scroll-left 18s linear infinite;
    }

    .staff-item {
      display: flex;
      gap: 8px;
      align-items: center;
      padding: 6px 8px;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 8px;
    }

    .staff-item img {
      width: 44px;
      height: 44px;
      border-radius: 6px;
      object-fit: cover;
    }

    .staff-item .meta {
      display: flex;
      flex-direction: column;
    }

    .staff-item .name {
      font-weight: 600;
      font-size: 14px;
    }

    .staff-item .role {
      font-size: 12px;
      color: var(--muted);
    }

    @keyframes scroll-left {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    .progress-wrap {
      margin-top: 12px;
      position: relative;
    }

    .progress {
      height: 18px;
      background: rgba(255, 255, 255, 0.04);
      border-radius: 10px;
      overflow: hidden;
    }

    .progress .bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(0, 0, 0, 0.185), rgba(255, 255, 255, 0.534));
      transition: width 300ms ease;
    }

    .progress .label {
      display: flex;
      justify-content: space-between;
      margin-top: 6px;
      font-size: 13px;
      color: var(--muted);
    }

    #rocket {
      position: absolute;
      top: 50%;
      transform: translate(-100%, -100%) scaleX(-1);
      width: 36px;
      height: 36px;
      pointer-events: none;
      max-left: calc(100% - 18px);
    }

    .footer {
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      gap: 12px;
    }

    @media (max-width: 900px) {
      .card {
        grid-template-columns: 1fr;
      }
      .logo {
        height: 100px;
      }
      .qq-qr img {
        width: 140px;
        height: 140px;
      }
    }

    .music-player {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 12px;
  padding: 8px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 10px;
}

.music-player .cover img {
  width: 50px;
  height: 50px;
  border-radius: 6px;
  object-fit: cover;
}

.music-player .controls {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.music-player .info {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  color: var(--muted);
}

.music-player .progress-music {
  width: 100%;
  height: 6px;
  background: rgba(255,255,255,0.05);
  border-radius: 3px;
  overflow: hidden;
}

.music-player .progress-music .bar {
  height: 100%;
  width: 0%;
  background: var(--accent);
  transition: width 0.2s linear;
}

  </style>
</head>

<body>
  <div class="background-slideshow"></div>
  <div class="container">
    <div class="card" role="main">
      <!-- 左侧 -->
      <div class="left">
        <div class="logo">
          <div style="text-align:center">
            <div style="font-size:20px">欢迎来到</div>
            <div style="font-size:12px;color:var(--muted)">[RICE]小饭堂scp服务器</div>
          </div>
        </div>

        <div class="qq-qr">
          <div style="font-weight:700">扫描二维码加入我们的QQ群</div>
          <img src="images/qq.png" alt="QQ群二维码"/>
          <small>群号：1014013558</small>
        </div>
      </div>

      <!-- 右侧 -->
      <div class="right">
        <div class="rules" id="rules">
          <h3>游玩须知</h3>
          <ul>
            <li>尊重其他玩家，禁止辱骂和骚扰</li>
            <li>资源包下载以及本服规则请前往群内置顶公告</li>
            <li>游戏内可用!report加上空格对管理发消息</li>
            <li>祝您游戏愉快！</li>
          </ul>
        </div>

        <div class="progress-wrap">
          <img id="rocket" src="images/rocket.png">
          <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100">
            <div class="bar" id="progress-bar"></div>
          </div>
          <div class="label">
            <span id="progress-text">正在连接服务器…</span>
            <span id="progress-percent">0%</span>
          </div>
        </div>

        <div class="staff-wrap" aria-label="服务器人员列表">
          <div id="staff-track" class="staff-track">
            <div class="staff-item">
              <img src="images/avatar.jpg" alt="管理员A"/>
              <div class="meta"><span class="name">塞菲莉娜</span><span class="role">服主</span></div>
            </div>
            <div class="staff-item">
              <img src="images/avatar2.jpg" alt="管理B"/>
              <div class="meta"><span class="name">白大厨</span><span class="role">服主</span></div>
            </div>
            <div class="staff-item">
              <img src="images/ding.jpg" alt="管理C"/>
              <div class="meta"><span class="name">牢丁</span><span class="role">副服主</span></div>
            </div>
            <div class="staff-item">
              <img src="images/niangniang.jpg" alt="管理D"/>
              <div class="meta"><span class="name">娘娘</span><span class="role">总主管</span></div>
            </div>
            <div class="staff-item">
              <img src="images/3il33n.png" alt="管理E"/>
              <div class="meta"><span class="name">3il33n</span><span class="role">技术</span></div>
            </div>
            <div class="staff-item">
              <img src="images/daogu.jpg" alt="管理F"/>
              <div class="meta"><span class="name">稻谷MCUT</span><span class="role">技术</span></div>
            </div>
            <div class="staff-item">
              <img src="images/dayaojing.jpg" alt="管理G"/>
              <div class="meta"><span class="name">大妖精</span><span class="role">技术</span></div>
            </div>
            <div class="staff-item">
              <img src="images/fufu.jpg" alt="管理H"/>
              <div class="meta"><span class="name">fufu</span><span class="role">技术主管</span></div>
            </div>
            <div class="staff-item">
              <img src="images/avatar4.jpg" alt="管理I"/>
              <div class="meta"><span class="name">琉璃默染</span><span class="role">吉祥物</span></div>
            </div>
          </div>
        </div>
<!-- 音乐播放器 -->
<div class="music-player">
  <div class="cover">
    <img src="images/music.jpg" alt="音乐封面">
  </div>
  <div class="controls">
    <div class="info">
      <span id="song-title">Target For Love</span>
      <span id="song-time">0:00 / 0:00</span>
    </div>
    <div class="progress-music">
      <div class="bar" id="music-bar"></div>
    </div>
  </div>
</div>

        <div class="footer">
          <div>模式：rice_breach • 地图：pg_site91</div>
          <div>提示：加载完成后将自动进入游戏</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 在页面加载时预加载背景图片
window.addEventListener('load', function() {
    const bgImages = [
        'images/bg1.jpg', 'images/bg2.jpg', 'images/bg3.jpg', 
        'images/bg4.jpg', 'images/bg5.jpg', 'images/bg6.jpg',
        'images/bg7.jpg', 'images/bg8.jpg', 'images/bg9.jpg',
        'images/bg10.jpg', 'images/bg11.jpg', 'images/bg12.jpg',
        'images/bg13.jpg'
    ];
    
    bgImages.forEach(src => {
        const img = new Image();
        img.src = src;
    });
});
    // 背景轮播
    const bg = document.querySelector('.background-slideshow');
    const images = ["images/bg1.jpg", "images/bg2.jpg", "images/bg3.jpg", "images/bg4.jpg", "images/bg5.jpg", "images/bg6.jpg", "images/bg7.jpg", "images/bg8.jpg", "images/bg9.jpg", "images/bg10.jpg", "images/bg11.jpg", "images/bg12.jpg", "images/bg13.jpg"];
    let current = 0;

    function changeBackground() {
      bg.style.backgroundImage = `url("${images[current]}")`;
      current = (current + 1) % images.length;
    }
    changeBackground();
    setInterval(changeBackground, 6000);

(function(){
  const track = document.getElementById('staff-track');
  if(!track) return;

  const items = Array.from(track.children);
  const gap = 18; // CSS gap
  const totalWidth = items.reduce((sum, el) => sum + el.offsetWidth + gap, 0);

  // 克隆一次内容
  track.innerHTML += track.innerHTML;
  track.style.width = totalWidth * 2 + 'px';

  // 设置滚动速度
  const speed = 60; 
  const duration = totalWidth / speed; 
  track.style.animation = `scroll-left ${duration}s linear infinite`;

  const style = document.createElement('style');
  style.innerHTML = `
    @keyframes scroll-left {
      0% { transform: translateX(0); }
      100% { transform: translateX(-${totalWidth}px); }
    }
  `;
  document.head.appendChild(style);
})();

    // 进度条动画
    (function() {
      const bar = document.getElementById('progress-bar');
      const text = document.getElementById('progress-text');
      const percent = document.getElementById('progress-percent');
      const rocket = document.getElementById('rocket');

      let value = 0;
      const tasks = [
        { name: '检索服务器信息', time: 12000 },
        { name: '创意工坊挂载', time: 15000 },
        { name: '发送客户端信息', time: 20000 },
        { name: 'Lua加载中', time: 21000 },
        { name: 'Lua加载完成', time: 25000 },
        { name: '初始化完成', time: 30000 }
      ];

      let i = 0;

      function nextTask() {
        if (i >= tasks.length) {
          const finish = setInterval(() => {
            value += Math.max(1, (100 - value) * 0.08);
            update();
            if (value >= 99.9) {
              value = 100;
              update();
              clearInterval(finish);
              onComplete();
            }
          }, 80);
          return;
        }

        const t = tasks[i];
        text.textContent = t.name + '...';
        const steps = Math.max(6, Math.round(t.time / 60));
        let step = 0;

        const iv = setInterval(() => {
          step++;
          value += ((100 - value) * (0.14 + Math.random() * 0.06)) / steps;
          if (value > 99) value = 99;
          update();
          if (step >= steps) {
            clearInterval(iv);
            i++;
            setTimeout(nextTask, 120);
          }
        }, t.time / steps);
      }

      function update() {
        bar.style.width = Math.min(100, value) + '%';
        percent.textContent = Math.floor(value) + '%';
        if (rocket) rocket.style.left = Math.min(100, value) + '%';
      }

      function onComplete() {
        text.textContent = '加载完成，准备进入…';
        percent.textContent = '100%';
        rocket.style.left = '100%';
      }

      nextTask();
    })();
(function() {
  const audio = document.getElementById('bgm');
  const bar = document.getElementById('music-bar');
  const timeText = document.getElementById('song-time');

  function formatTime(sec) {
    const m = Math.floor(sec / 60);
    const s = Math.floor(sec % 60);
    return `${m}:${s.toString().padStart(2, '0')}`;
  }

  audio.addEventListener('loadedmetadata', () => {
    timeText.textContent = `0:00 / ${formatTime(audio.duration)}`;
  });

  audio.addEventListener('timeupdate', () => {
    const percent = (audio.currentTime / audio.duration) * 100;
    bar.style.width = percent + '%';
    timeText.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
  });
})();

      const audio = document.getElementById("bgm");
  audio.volume = 0.1; 
  </script>
</body>
</html>




